(this.webpackJsonpadmin_panel=this.webpackJsonpadmin_panel||[]).push([[0],{166:function(e,t,a){},241:function(e,t,a){e.exports=a(426)},247:function(e,t,a){},248:function(e,t,a){},426:function(e,t,a){"use strict";a.r(t);var n,l,r=a(0),i=a.n(r),c=a(30),o=a.n(c),s=(a(246),a(247),a(248),a(80)),u=a(34),m=a(13),p=a.n(m),d=a(40),y=a(33),h=a(428),b=a(433),g=a(67),E=a(434),f=a(50),v=a(439),k=a(440),x=a(441),O=a(442),w=a(120),j=a(62),I=a(95),_=a(132),R=a(133),S=(a(131),a(44)),T=(a(175),a(10)),A=a(84),C=a(121),D=a.n(C),B=a(213),V=a.n(B).a.create({baseURL:"https://books.youngreaders.ru"}),q=new(n=function(){function e(){Object(_.a)(this,e),Object(I.a)(this,"apikey",l,this),Object(T.n)(this)}return Object(R.a)(e,[{key:"setApiKey",value:function(e){e?(this.apikey=e,D.a.set("yreaders_key",e)):this.apikey=null}},{key:"getApiKey",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.post("/api/sys/key",Object(A.a)({},t));case 3:return a=e.sent,this.setApiKey(a.data["x-api-key"]),e.abrupt("return",{status:"ok"});case 8:if(e.prev=8,e.t0=e.catch(0),this.setApiKey(null),!e.t0.response||401!==e.t0.response.status){e.next=13;break}return e.abrupt("return",{status:"err",message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"});case 13:return e.abrupt("return",{status:"err",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"});case 14:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateApiKey",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V("/api/sys/key",{headers:{"x-api-key":this.apikey||D.a.get("yreaders_key")}});case 3:t=e.sent,this.setApiKey(t.data["x-api-key"]),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.setApiKey(null),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.apikey=null,D.a.remove("yreaders_key")}},{key:"loggedIn",get:function(){return console.log(this.apikey,!!this.apikey),!!this.apikey}}]),e}(),l=Object(S.a)(n.prototype,"apikey",[T.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.a.get("yreaders_key")||null}}),Object(S.a)(n.prototype,"loggedIn",[T.g],Object.getOwnPropertyDescriptor(n.prototype,"loggedIn"),n.prototype),Object(S.a)(n.prototype,"setApiKey",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"setApiKey"),n.prototype),Object(S.a)(n.prototype,"getApiKey",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"getApiKey"),n.prototype),Object(S.a)(n.prototype,"updateApiKey",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"updateApiKey"),n.prototype),Object(S.a)(n.prototype,"logout",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"logout"),n.prototype),n);V.interceptors.response.use(null,(function(e){return e.response&&401===e.response.status&&q.logout(),Promise.reject(e)}));var z,P,F,L,N,K=q,M=a(156),Y=new(z=function(){function e(){Object(_.a)(this,e),Object(I.a)(this,"currentYAMLDraft",P,this),Object(I.a)(this,"steps",F,this),Object(I.a)(this,"results",L,this),Object(I.a)(this,"meta",N,this),Object(T.n)(this)}return Object(R.a)(e,[{key:"getDraft",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("hello"),e.next=4,K.updateApiKey();case 4:return"/api/sys/drafts/prod.yml",e.next=7,V("/api/sys/drafts/prod.yml",{headers:{"x-api-key":K.apikey}});case 7:t=e.sent,this.currentYAMLDraft=t.data.text,a=M.parse(this.currentYAMLDraft),this.results=Object.keys(a.results).map((function(e){return{title:e,body:a.results[e]}})),this.steps=Object.keys(a.steps).map((function(e){return{title:e,body:a.steps[e]}})),this.meta=a.meta,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"addStep",value:function(e){try{this.steps.push(e)}catch(t){console.error(t)}}},{key:"setStep",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.steps.find((function(e){return e.title===t})).body=a,e.next=5,this.saveDraft();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteStep",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=this.steps.findIndex((function(e){return e.title===t})),(n=Object(j.a)(this.steps)).splice(a,1),this.steps=n}catch(l){console.error(l)}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addResult",value:function(e){console.log(e);try{this.results.push(e)}catch(t){console.error(t)}}},{key:"setResult",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.results.find((function(e){return e.title===t})).body=a,e.next=5,this.saveDraft();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteResult",value:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=this.results.findIndex((function(e){return e.title===t})),(l=Object(j.a)(this.results)).splice(n,1),this.results=l}catch(a){console.error(a)}case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveDraft",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,n,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},this.steps.forEach((function(e){return t[e.title]=e.body})),a={},this.results.forEach((function(e){return a[e.title]=e.body})),e.next=6,K.updateApiKey();case 6:return"/api/sys/drafts/prod.yml",n={headers:{"x-api-key":K.apikey}},e.prev=8,l={meta:{title:this.meta.title||"draft",version:Math.round(10*(this.meta.version||1)+1)/10},router_politics:{steps_stack:["intro","final"]},steps:t,results:a},e.next=12,V.post("/api/sys/drafts/prod.yml",{text:M.stringify(l)},n);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.error(e.t0);case 17:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"publishDraft",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.saveDraft();case 3:return e.next=5,K.updateApiKey();case 5:return"/api/sys/drafts/active/prod.yml",t={headers:{"x-api-key":K.apikey}},e.next=9,V.patch("/api/sys/drafts/active/prod.yml",null,t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkDelResults",value:function(e){return this.steps.filter((function(t){var a;if(Array.isArray(null===t||void 0===t||null===(a=t.body)||void 0===a?void 0:a.placeholders)){var n,l=Object(w.a)(t.body.placeholders);try{for(l.s();!(n=l.n()).done;){var r=n.value;if("tagging_one"===r.type||"tagging_many"===r.type){var i,c=Object(w.a)(r.items);try{for(c.s();!(i=c.n()).done;){var o,s,u,m,p=i.value,d=null===p||void 0===p||null===(o=p.value)||void 0===o||null===(s=o.to_results)||void 0===s?void 0:s.indexOf(e);if(void 0!==d&&-1!==d)return console.log(null===p||void 0===p||null===(u=p.value)||void 0===u||null===(m=u.to_results)||void 0===m?void 0:m.indexOf(e)),!0}}catch(y){c.e(y)}finally{c.f()}}}}catch(y){l.e(y)}finally{l.f()}}return!1})).map((function(e){return e.title}))}},{key:"checkDelStep",value:function(e){return this.steps.filter((function(t){var a,n;if((null===t||void 0===t||null===(a=t.body)||void 0===a?void 0:a.next_steps)&&-1!==t.body.next_steps.indexOf(e))return!0;if(Array.isArray(null===t||void 0===t||null===(n=t.body)||void 0===n?void 0:n.placeholders)){var l,r=Object(w.a)(t.body.placeholders);try{for(r.s();!(l=r.n()).done;){var i=l.value;if("tagging_one"===i.type||"tagging_many"===i.type){var c,o=Object(w.a)(i.items);try{for(o.s();!(c=o.n()).done;){var s,u,m=c.value,p=null===m||void 0===m||null===(s=m.value)||void 0===s||null===(u=s.next_steps)||void 0===u?void 0:u.indexOf(e);if(void 0!==p&&-1!==p)return!0}}catch(d){o.e(d)}finally{o.f()}}}}catch(d){r.e(d)}finally{r.f()}}return!1})).map((function(e){return e.title}))}}]),e}(),P=Object(S.a)(z.prototype,"currentYAMLDraft",[T.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=Object(S.a)(z.prototype,"steps",[T.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=Object(S.a)(z.prototype,"results",[T.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=Object(S.a)(z.prototype,"meta",[T.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(S.a)(z.prototype,"getDraft",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"getDraft"),z.prototype),Object(S.a)(z.prototype,"addStep",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"addStep"),z.prototype),Object(S.a)(z.prototype,"setStep",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"setStep"),z.prototype),Object(S.a)(z.prototype,"deleteStep",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"deleteStep"),z.prototype),Object(S.a)(z.prototype,"addResult",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"addResult"),z.prototype),Object(S.a)(z.prototype,"setResult",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"setResult"),z.prototype),Object(S.a)(z.prototype,"deleteResult",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"deleteResult"),z.prototype),Object(S.a)(z.prototype,"saveDraft",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"saveDraft"),z.prototype),Object(S.a)(z.prototype,"publishDraft",[T.f],Object.getOwnPropertyDescriptor(z.prototype,"publishDraft"),z.prototype),z),H=h.a.Content,Z=h.a.Footer,U=h.a.Sider,X={steps:"\u0428\u0430\u0433\u0438",results:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b",statistic:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430",error:"\u041e\u0448\u0438\u0431\u043a\u0430",logout:"\u0412\u044b\u0439\u0442\u0438"},J=function(e){var t=e.children,a=Object(r.useState)(!1),n=Object(y.a)(a,2),l=n[0],c=n[1],o=Object(u.g)(),m=Object(u.h)().pathname.split("/").filter((function(e){return""!==e})),w=function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.publishDraft();case 3:b.a.success({message:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u044b"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),b.a.error({message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(h.a,{style:{minHeight:"100vh"}},i.a.createElement(U,{collapsible:!0,collapsed:l,onCollapse:c},i.a.createElement("div",{className:"logo"},i.a.createElement("img",{alt:"\u0416\u0438\u0432\u0430\u044f \u043a\u043b\u0430\u0441\u0441\u0438\u043a\u0430",src:"/static/panel_v2/logo.svg",width:"100%"})),i.a.createElement(g.a,{theme:"dark",defaultSelectedKeys:[m[0]],mode:"inline",onClick:function(e){var t=e.key;if("logout"===t)return K.logout(),o.replace("/login/");K.updateApiKey(),o.push("/".concat(t,"/"))}},i.a.createElement(g.a.Item,{key:"steps",icon:i.a.createElement(v.a,null)},X.steps),i.a.createElement(g.a.Item,{key:"results",icon:i.a.createElement(k.a,null)},X.results),i.a.createElement(g.a.Item,{key:"statistic",icon:i.a.createElement(x.a,null)},X.statistic),i.a.createElement(g.a.Item,{key:"logout",icon:i.a.createElement(O.a,null)},X.logout))),i.a.createElement(h.a,{className:"site-layout"},i.a.createElement(H,{style:{margin:"0 16px"}},i.a.createElement(E.a,{style:{margin:"16px 0",display:"inline-block"}},m.map((function(e){return i.a.createElement(E.a.Item,{key:"breadcrumb-".concat(e)},X[e]?i.a.createElement(s.b,{to:"/".concat(e)},X[e]):e)}))),i.a.createElement(f.a,{type:"primary",style:{float:"right",margin:"16px 0"},onClick:w},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),i.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},t)),i.a.createElement(Z,{style:{textAlign:"center"}},"\u0416\u0438\u0432\u0430\u044f \u043a\u043b\u0430\u0441\u0441\u0438\u043a\u0430 \xa92020 Created by Posline Team")))},W=a(64),G=a(431),Q=a(437),$=a(438),ee=a(430),te=a(429),ae=a(432),ne=a(119),le=a(443),re=a(444),ie=a(445),ce=G.a.confirm,oe={demography:"green",domain:"geekblue",user_variant:"volcano",subdomain:"blue"},se=[{title:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",dataIndex:"title",key:"title",render:function(e){return i.a.createElement(s.b,{to:"/steps/".concat(e,"/")},e)}},{title:"\u0422\u0435\u043a\u0441\u0442",dataIndex:"body",key:"body.title",render:function(e){return e.title.slice(0,40)+"..."}},{title:"\u0422\u0435\u0433\u0438",key:"body.stats",dataIndex:"body",render:function(e){return(e.stats||[]).map((function(e,t){var a=oe[e]||"geekblue";return"loser"===e&&(a="volcano"),i.a.createElement(Q.a,{color:a,key:"".concat(e,"-").concat(t)},e)}))}},{title:"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b",key:"actions",dataIndex:"title",render:function(e){return i.a.createElement($.b,{size:"middle"},i.a.createElement("a",{onClick:function(){var t=Y.checkDelStep(e),a=t.length?i.a.createElement(le.a,{twoToneColor:"#fd0404"}):i.a.createElement(re.a,{twoToneColor:"#52c41a"}),n=t.length?"\u042d\u0442\u043e\u0442 \u0448\u0430\u0433 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0441\u044f \u0432 ".concat(t.join(", ")):"\u042d\u0442\u043e\u0442 \u0448\u0430\u0433 \u043d\u0438\u0433\u0434\u0435 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f";ce({title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0448\u0430\u0433\u0430",icon:a,content:n,okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",okType:t.length?"danger":"default",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onOk:function(){Y.deleteStep(e)},onCancel:function(){console.log("Cancel")}})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))}}],ue=Object(W.a)((function(){var e=Object(r.useState)(!1),t=Object(y.a)(e,2),a=t[0],n=t[1],l=Object(u.g)(),c=ee.a.useForm(),o=Object(y.a)(c,1)[0];Object(r.useEffect)((function(){Y.steps.length||Y.getDraft()}),[]);return i.a.createElement("div",null,i.a.createElement(te.a,{columns:se,dataSource:Y.steps,pagination:{defaultPageSize:10,showSizeChanger:!1,position:["bottomCenter"]},loading:!Y.steps.length,footer:function(){return i.a.createElement(f.a,{htmlType:"button",style:{width:"100%",height:56},type:"dashed",icon:i.a.createElement(ie.a,null),onClick:n.bind(null,!0)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0448\u0430\u0433")}}),i.a.createElement(G.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0448\u0430\u0433",visible:a,onOk:function(){o.submit()},onCancel:n.bind(null,!1),okText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"},i.a.createElement(ee.a,{form:o,layout:"vertical",name:"userForm",onFinish:function(e){Y.addStep(e),l.replace("/steps/".concat(e.title))}},i.a.createElement(ee.a.Item,{name:["title"],label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",rules:[{required:!0,message:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{validator:function(e,t){return Y.steps.find((function(e){return e.title===t}))?Promise.reject("\u0428\u0430\u0433 \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u043c \u0443\u0436\u0435 \u0435\u0441\u0442\u044c"):t.match(/[^A-Za-z0-9_]/)?Promise.reject("\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0446\u0438\u0444\u0440\u044b"):Promise.resolve()}}]},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u0422\u0438\u043f",name:["body","type"],rules:[{required:!0,message:"\u0422\u0438\u043f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}]},i.a.createElement(ne.a,null,i.a.createElement(ne.a.Option,{value:"general"},"general"),i.a.createElement(ne.a.Option,{value:"info"},"info"),i.a.createElement(ne.a.Option,{value:"items"},"items"),i.a.createElement(ne.a.Option,{value:"domainSelection"},"domainSelection"))),i.a.createElement(ee.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:["body","title"]},i.a.createElement(ae.a.TextArea,null)))))})),me=G.a.confirm,pe=[{title:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",dataIndex:"title",key:"title",render:function(e){return i.a.createElement(s.b,{to:"/results/".concat(e,"/")},e)}},{title:"\u0422\u0435\u043a\u0441\u0442",dataIndex:"body",key:"body.description",render:function(e){return e.description.slice(0,40)+"..."}},{title:"\u041a\u043d\u0438\u0433\u0438",key:"body.books",dataIndex:"body",render:function(e){return(e.books||[]).map((function(e){return e.name})).join(",")}},{title:"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b",key:"actions",dataIndex:"title",render:function(e){return i.a.createElement($.b,{size:"middle"},i.a.createElement("a",{onClick:function(){var t=Y.checkDelResults(e),a=t.length?i.a.createElement(le.a,{twoToneColor:"#fd0404"}):i.a.createElement(re.a,{twoToneColor:"#52c41a"}),n=t.length?"\u042d\u0442\u043e\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0441\u044f \u0432 ".concat(t.join(", ")):"\u042d\u0442\u043e\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043d\u0438\u0433\u0434\u0435 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f";me({title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430",icon:a,content:n,okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",okType:t.length?"danger":"default",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onOk:function(){Y.deleteResult(e)},onCancel:function(){console.log("Cancel")}})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))}}],de=Object(W.a)((function(){var e=Object(r.useState)(!1),t=Object(y.a)(e,2),a=t[0],n=t[1],l=Object(u.g)(),c=ee.a.useForm(),o=Object(y.a)(c,1)[0];Object(r.useEffect)((function(){Y.results.length||Y.getDraft()}),[]);return i.a.createElement("div",null,i.a.createElement(te.a,{columns:pe,dataSource:Y.results,pagination:{defaultPageSize:10,showSizeChanger:!1,position:["bottomCenter"]},loading:!Y.results.length,footer:function(){return i.a.createElement(f.a,{htmlType:"button",style:{width:"100%",height:56},type:"dashed",icon:i.a.createElement(ie.a,null),onClick:n.bind(null,!0)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442")}}),i.a.createElement(G.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",visible:a,onOk:function(){o.submit()},onCancel:n.bind(null,!1),okText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"},i.a.createElement(ee.a,{form:o,layout:"vertical",name:"userForm",onFinish:function(e){Y.addResult({title:e.title,body:Object(A.a)({},e.body,{books:[{quotes:["\u0426\u0438\u0442\u0430\u0442\u0430"],annotations:["\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f"]}]})}),l.replace("/results/".concat(e.title))}},i.a.createElement(ee.a.Item,{name:["title"],label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",rules:[{required:!0,message:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{validator:function(e,t){return t?Y.results.find((function(e){return e.title===t}))?Promise.reject("\u0428\u0430\u0433 \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u043c \u0443\u0436\u0435 \u0435\u0441\u0442\u044c"):t.match(/[^A-Za-z0-9_]/)?Promise.reject("\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0446\u0438\u0444\u0440\u044b"):Promise.resolve():Promise.reject()}}]},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:["body","header"],rules:[{required:!0,message:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}]},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:["body","description"],rules:[{required:!0,message:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}]},i.a.createElement(ae.a.TextArea,null)))))})),ye=a(149),he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.toISOString().slice(0,10)},be=function(){var e=function(e,t){var a=new Blob([e],{type:"application/vnd.ms-excel"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=t,document.body.appendChild(l),l.click()},t=function(){var t=Object(d.a)(p.a.mark((function t(){var n,l,r,i,c,o,s,u=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.length>0&&void 0!==u[0]?u[0]:7){t.next=3;break}return t.abrupt("return",a());case 3:return l=new Date,r=l.getDate()-n,l.setDate(r),i=he(l),c=he(new Date),t.next=10,V.get("/api/sys/statistics/report/from/".concat(i,"/to/").concat(c,"/"),{headers:{"x-api-key":K.apikey},responseType:"blob"});case 10:o=t.sent,s="\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430_c_".concat(i,"_\u043f\u043e_").concat(c,".xlsx"),e(o.data,s);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(d.a)(p.a.mark((function t(){var a,n,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=he(new Date("2020-12-01")),n=he(new Date),t.next=4,V.get("/api/sys/statistics/report/from/".concat(a,"/to/").concat(n,"/"),{headers:{"x-api-key":K.apikey},responseType:"blob"});case 4:l=t.sent,"\u0432\u0441\u044f_\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430.xlsx",e(l.data,"\u0432\u0441\u044f_\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430.xlsx");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(d.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.get("/analysis/daily_report.xlsx",{headers:{Authorization:"Basic YWRtaW46MG5taVA4YVU="},responseType:"blob"});case 2:a=t.sent,e(a.data,"daily_report.xlsx");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(d.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.get("/analysis/weekly_report.xlsx",{headers:{Authorization:"Basic a3VkZXA6MTIz"},responseType:"blob"});case 2:a=t.sent,e(a.data,"weekly_report.xlsx");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(d.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.get("/analysis/monthly_report.xlsx",{headers:{Authorization:"Basic a3VkZXA6MTIz"},responseType:"blob"});case 2:a=t.sent,e(a.data,"monthly_report.xlsx");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var t=Object(d.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.get("/analysis/open_answers.xlsx",{headers:{Authorization:"Basic a3VkZXA6MTIz"},responseType:"blob"});case 2:a=t.sent,e(a.data,"open_answers.xlsx");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=i.a.createElement(g.a,{onClick:function(e){var a=e.key;return t(parseInt(a))}},i.a.createElement(g.a.Item,{key:1},"\u0417\u0430 \u0434\u0435\u043d\u044c"),i.a.createElement(g.a.Item,{key:7},"\u0417\u0430 \u043d\u0435\u0434\u0435\u043b\u044e"),i.a.createElement(g.a.Item,{key:30},"\u0417\u0430 \u043c\u0435\u0441\u044f\u0446"),i.a.createElement(g.a.Item,{key:0},"\u0417\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f"));return i.a.createElement("div",{className:"Statistic"},i.a.createElement("div",{className:"Statistic-section"},i.a.createElement("h2",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),i.a.createElement(f.a,{onClick:n},"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442"),i.a.createElement(f.a,{onClick:l},"\u0415\u0436\u0435\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442"),i.a.createElement(f.a,{onClick:r},"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442")),i.a.createElement("div",{className:"Statistic-section"},i.a.createElement("h2",null,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),i.a.createElement(ye.a,{overlay:o},i.a.createElement(f.a,null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043b\u0430\u0439\u043a\u0430\u043c \u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c")),i.a.createElement(f.a,{onClick:c},"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u043e\u0442\u0432\u0435\u0442\u0430\u043c")))},ge=a(446),Ee=a(447),fe=function(){var e=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getApiKey(t);case 2:"err"===(a=e.sent).status&&b.a.error(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(ee.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:e},i.a.createElement(ee.a.Item,null,i.a.createElement("h1",null,"\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430")),i.a.createElement(ee.a.Item,{name:"login",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}]},i.a.createElement(ae.a,{prefix:i.a.createElement(ge.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})),i.a.createElement(ee.a.Item,{name:"password",rules:[{required:!0,message:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}]},i.a.createElement(ae.a,{prefix:i.a.createElement(Ee.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u0412\u043e\u0439\u0442\u0438")))},ve=(a(166),a(436)),ke=a(449),xe=a(450),Oe=a(105),we=a(448),je=ne.a.Option,Ie=function(e){var t=e.option,a=e.results,n=e.steps,l=e.remove,c=e.index,o=Object(r.useState)(t.raw_text),s=Object(y.a)(o,2),u=s[0],m=s[1];return i.a.createElement(ee.a.Item,{className:"StepOption"},i.a.createElement(ee.a.Item,{style:{width:"90%",display:"inline-block"}},i.a.createElement(ee.a.Item,{label:"\u0422\u0435\u043a\u0441\u0442",style:{paddingRight:12,width:"40%",display:"inline-block"},name:["placeholders",c[0],"items",c[1],"label"],rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442!"}],initialValue:t.label},i.a.createElement(ae.a.TextArea,null)),i.a.createElement(ee.a.Item,{label:"\u0414\u0430\u043d\u043d\u044b\u0435",style:{paddingRight:12,width:"40%",display:"inline-block"},name:["placeholders",c[0],"items",c[1],"value","data"],initialValue:t.value.data,rules:[{required:!u,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442!"}]},i.a.createElement(ne.a,{mode:"tags",placeholder:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430",disabled:u})),i.a.createElement(ee.a.Item,{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0432\u0432\u043e\u0434",style:{paddingRight:12,width:"20%",display:"inline-block"},name:["placeholders",c[0],"items",c[1],"raw_text"],valuePropName:"checked",initialValue:t.raw_text},i.a.createElement(ne.a,{defaultValue:!!t.raw_text,onSelect:function(e){return m(e)}},i.a.createElement(je,{value:!1},"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c"),i.a.createElement(je,{value:!0},"\u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c"))),i.a.createElement(ee.a.Item,{label:"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b",style:{paddingRight:12,width:"50%",display:"inline-block"},name:["placeholders",c[0],"items",c[1],"value","to_results"],initialValue:t.value.to_results},i.a.createElement(ne.a,{mode:"tags",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"},a.map((function(e){return i.a.createElement(je,{key:"option-".concat(e),value:e},e)})))),i.a.createElement(ee.a.Item,{label:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0448\u0430\u0433\u0438",style:{paddingRight:12,width:"50%",display:"inline-block"},name:["placeholders",c[0],"items",c[1],"value","next_steps"],initialValue:t.value.next_steps},i.a.createElement(ne.a,{mode:"tags",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0433\u0438"},n.map((function(e){return i.a.createElement(je,{key:"option-".concat(e),value:e},e)}))))),i.a.createElement(ee.a.Item,{style:{display:"inline-block",width:"10%",textAlign:"center",marginTop:84}},i.a.createElement(Oe.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442"},i.a.createElement(f.a,{danger:!0,shape:"circle",icon:i.a.createElement(we.a,null),onClick:l}))))},_e=function(e){var t=e.children,a=e.label,n=e.initialHidden,l=void 0!==n&&n,c=e.hidable,o=void 0===c||c,s=Object(r.useState)(l),u=Object(y.a)(s,2),m=u[0],p=u[1];return i.a.createElement(ee.a.Item,null,i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block",marginBottom:4}},o?i.a.createElement(f.a,{type:"text",icon:m?i.a.createElement(ke.a,null):i.a.createElement(xe.a,null),size:"small",style:{display:"inline-block"},onClick:p.bind(null,(function(e){return!e}))},i.a.createElement("b",null,a)):i.a.createElement("b",null,a)),i.a.createElement(ee.a.Item,{hidden:m},t))},Re=ne.a.Option,Se=function(e){var t=e.element,a=e.results,n=void 0===a?["lol","kek"]:a,l=e.steps,c=void 0===l?["lol","kek"]:l,o=e.index,s=e.type,u=e.onRemove,m=Object(r.useState)(Object(j.a)(t.items)),p=Object(y.a)(m,2),d=p[0],h=p[1],b=Object(r.useState)(!1),g=Object(y.a)(b,2),E=g[0],v=g[1],k=function(e){d[e]=null,h(Object(j.a)(d))};return i.a.createElement(ee.a.Item,{className:"StepElement"},i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u0422\u0438\u043f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",name:["placeholders",o,"name"],style:{display:"inline-block",width:"calc(40% - 4px)",paddingRight:12}},i.a.createElement("h3",null,"tagging_one"===s?"\u041e\u0434\u0438\u043d\u043e\u0447\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440":"\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440")),i.a.createElement(ee.a.Item,{style:{paddingRight:12,float:"right"},label:"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b"},i.a.createElement(f.a,{icon:E?i.a.createElement(ke.a,null):i.a.createElement(xe.a,null),onClick:v.bind(null,(function(e){return!e})),style:{display:"inline-block",marginRight:12,width:140}},E?"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"),i.a.createElement(f.a,{danger:!0,onClick:u,style:{display:"inline-block"}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442"))),i.a.createElement(ee.a.Item,{hidden:E},i.a.createElement(_e,{label:"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",hidable:!1},i.a.createElement(ee.a.Item,{name:["placeholders",o,"name"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0433\u0430"}],initialValue:t.name,style:{paddingRight:12,display:"inline-block",width:"20%"}},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block",width:"50%"},name:["placeholders",o,"keys"],label:"\u041a\u043b\u044e\u0447\u0438",required:!0,initialValue:t.keys},i.a.createElement(ne.a,{mode:"tags",style:{width:"100%"}},i.a.createElement(Re,{value:"type"},"type"),i.a.createElement(Re,{value:"name"},"name"),i.a.createElement(Re,{value:"value"},"value"),i.a.createElement(Re,{value:"label"},"label"),i.a.createElement(Re,{value:"raw_text"},"raw_text"),i.a.createElement(Re,{value:"index"},"index"))),i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block",width:"20%",visibility:"hidden"},name:["placeholders",o,"type"],label:"\u0422\u0438\u043f",required:!0,initialValue:t.type},i.a.createElement(ae.a,null))),i.a.createElement(_e,{label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",initialHidden:!0},i.a.createElement(ee.a.Item,{style:{paddingRight:12,width:"40%",display:"tagging_one"===s?"none":"inline-block"},name:["placeholders",o,"gui_options","minSelected"],label:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0432\u044b\u0431\u043e\u0440\u043e\u0432",initialValue:t.gui_options&&t.gui_options.minSelected},i.a.createElement(ve.a,{style:{width:"100%"},min:0})),i.a.createElement(ee.a.Item,{style:{paddingRight:12,width:"40%",display:"tagging_one"===s?"none":"inline-block"},name:["placeholders",o,"gui_options","maxSelected"],label:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0432\u044b\u0431\u043e\u0440\u043e\u0432",initialValue:t.gui_options&&t.gui_options.maxSelected},i.a.createElement(ve.a,{style:{width:"100%"},min:0})),i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block",width:"40%"},name:["placeholders",o,"gui_options","statistics_params"],label:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438",initialValue:t.gui_options&&t.gui_options.statistics_params},i.a.createElement(ne.a,{mode:"tags",style:{width:"100%"},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0438\u043b\u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0442\u043e\u0432\u044b\u0439"},i.a.createElement(Re,{value:"sex"},"sex"))),i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"tagging_one"===s?"none":"inline-block",width:"60%"},name:["placeholders",o,"gui_options","ignoreOnlyRawText"],label:"\u0412\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0432\u0432\u043e\u0434\u0430",initialValue:t.gui_options&&t.gui_options.ignoreOnlyRawText},i.a.createElement(ne.a,{defaultValue:!(!t.gui_options||!t.gui_options.ignoreOnlyRawText)},i.a.createElement(Re,{value:!1},"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c"),i.a.createElement(Re,{value:!0},"\u0417\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c")))),i.a.createElement(_e,{label:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b",initialHidden:!0},d.map((function(e,t){return e?i.a.createElement(Ie,{index:[o,t],key:"option-".concat(1e3*Math.random(),"-").concat(t),option:e,steps:c,results:n,remove:k.bind(null,t)}):""})),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"dashed",onClick:function(){h([].concat(Object(j.a)(d),[{label:"\u041d\u043e\u0432\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",value:{data:[],to_results:[],next_steps:[]}}]))},block:!0,icon:i.a.createElement(ie.a,null),style:{height:40}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442")))))},Te=ne.a.Option,Ae=function(e){var t=e.index,a=e.element,n=void 0===a?{}:a,l=e.onRemove,c=Object(r.useState)(!!n.gui_options),o=Object(y.a)(c,2),s=o[0],u=o[1],m=Object(r.useState)(!1),p=Object(y.a)(m,2),d=p[0],h=p[1];return i.a.createElement(ee.a.Item,{className:"StepElement"},i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u0422\u0438\u043f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430",name:["placeholders",t,"name"],style:{display:"inline-block",width:"calc(40% - 4px)",paddingRight:12}},i.a.createElement("h3",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0432\u0432\u043e\u0434")),i.a.createElement(ee.a.Item,{style:{paddingRight:12,float:"right"},label:"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b"},i.a.createElement(f.a,{icon:d?i.a.createElement(ke.a,null):i.a.createElement(xe.a,null),onClick:h.bind(null,(function(e){return!e})),style:{display:"inline-block",marginRight:12,width:140}},d?"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"),i.a.createElement(f.a,{danger:!0,onClick:l,style:{display:"inline-block"}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442"))),i.a.createElement(ee.a.Item,{hidden:d},i.a.createElement(_e,{label:"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",hidable:!1},i.a.createElement(ee.a.Item,{name:["placeholders",t,"name"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,initialValue:n.name,style:{paddingRight:12,display:"inline-block",width:"20%"}},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block",width:"50%"},name:["placeholders",t,"keys"],label:"\u041a\u043b\u044e\u0447\u0438",required:!0,initialValue:n.keys},i.a.createElement(ne.a,{mode:"tags",style:{width:"100%"}},i.a.createElement(Te,{value:"type"},"type"),i.a.createElement(Te,{value:"name"},"name"),i.a.createElement(Te,{value:"value"},"value"),i.a.createElement(Te,{value:"label"},"label"),i.a.createElement(Te,{value:"raw_text"},"raw_text"),i.a.createElement(Te,{value:"index"},"index"))),i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block",width:"20%",visibility:"hidden"},name:["placeholders",t,"type"],label:"\u0422\u0438\u043f",required:!0,initialValue:n.type},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u0412\u043e\u043f\u0440\u043e\u0441",initialValue:n.label,name:["placeholders",t,"label"],style:{marginBottom:0,paddingRight:12,display:"inline-block",width:"40%"}},i.a.createElement(ae.a.TextArea,{autoSize:{minRows:9}})),i.a.createElement(ee.a.Item,{style:{marginBottom:0,display:"inline-block",width:"50%"}},i.a.createElement(ee.a.Item,{label:"\u0422\u0438\u043f \u043f\u043e\u043b\u044f",style:{paddingBottom:0,display:"inline-block",width:"100%"}},i.a.createElement(ne.a,{value:s,onSelect:function(e){return u(e)}},i.a.createElement(Te,{value:!1},"\u0421\u0442\u0440\u043e\u043a\u0430"),i.a.createElement(Te,{value:!0},"\u0427\u0438\u0441\u043b\u043e"))),i.a.createElement(ee.a.Item,{style:{display:s?"block":"none"}},i.a.createElement(ee.a.Item,{label:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",name:["placeholders",t,"gui_options","min"],initialValue:n.gui_options&&n.gui_options.min,style:{marginBottom:0,display:"inline-block",width:"50%",paddingRight:12}},i.a.createElement(ve.a,{style:{width:"100%"}})),i.a.createElement(ee.a.Item,{label:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",name:["placeholders",t,"gui_options","max"],initialValue:n.gui_options&&n.gui_options.max,style:{marginBottom:0,display:"inline-block",width:"50%"}},i.a.createElement(ve.a,{style:{width:"100%"}})),i.a.createElement(ee.a.Item,{label:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0435",name:["placeholders",t,"gui_options","error_message"],initialValue:n.gui_options&&n.gui_options.error_message,style:{marginBottom:0,display:"inline-block",width:"100%"}},i.a.createElement(ae.a.TextArea,{autoSize:!0}))))))))},Ce=function(e){var t=e.defaultValue,a=void 0===t?[]:t,n=e.results,l=e.steps,c=e.hidden,o=Object(r.useState)(a),s=Object(y.a)(o,2),u=s[0],m=s[1],p=function(e){u[e]=null,m(Object(j.a)(u))},d=i.a.createElement(g.a,{onClick:function(e){var t=e.key;m([].concat(Object(j.a)(u),"raw_text"===t?[{name:"answer",keys:["type","name","value","label","raw_text","index"],type:t}]:[{name:"answer",keys:["type","name","value","label","raw_text","index"],type:t,items:[]}]))}},i.a.createElement(g.a.Item,{key:"tagging_one"},"\u041e\u0434\u0438\u043d\u043e\u0447\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"),i.a.createElement(g.a.Item,{key:"tagging_many"},"\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"),i.a.createElement(g.a.Item,{key:"raw_text"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0432\u0432\u043e\u0434"));return i.a.createElement(ee.a.Item,{style:{marginTop:40},hidden:c},i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block"}},i.a.createElement("h2",null,"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b")),i.a.createElement(ee.a.Item,{style:{paddingRight:12,float:"right"}},i.a.createElement(ye.a,{overlay:d,placement:"bottomCenter"},i.a.createElement(f.a,{type:"primary",icon:i.a.createElement(ie.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442")))),u.filter((function(e){return!!e})).length?u.map((function(e,t){return e?"tagging_one"===e.type||"tagging_many"===e.type?i.a.createElement(Se,{type:e.type,index:t,key:"TaggingOneElement-".concat(t),element:e,results:n,steps:l,onRemove:p.bind(null,t)}):"raw_text"===e.type?i.a.createElement(Ae,{element:e,index:t,key:"RawText-".concat(t),onRemove:p.bind(null,t)}):"-":""})):i.a.createElement(ee.a.Item,{style:{marginBottom:0,paddingTop:8,paddingBottom:8,textAlign:"center"},className:"StepElement"},i.a.createElement("h4",null,"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")))},De=a(227),Be=ne.a.Option,Ve=function(){return i.a.createElement(De.a,null,i.a.createElement(ee.a,{layout:"vertical"},i.a.createElement(ee.a.Item,null,i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement("h2",null,"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")),i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u0422\u0438\u043f",name:"type",style:{paddingRight:12,width:"20%",display:"inline-block"}},i.a.createElement(ne.a,null,i.a.createElement(Be,{value:"general"},"general"),i.a.createElement(Be,{value:"info"},"info"),i.a.createElement(Be,{value:"items"},"items"),i.a.createElement(Be,{value:"domainSelection"},"domainSelection"),i.a.createElement(Be,{value:"result"},"result"))),i.a.createElement(ee.a.Item,{label:"\u0422\u0435\u0433\u0438",style:{paddingRight:12,width:"40%",display:"inline-block"},name:"stats"},i.a.createElement(ne.a,{mode:"tags",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u0433\u0438"},i.a.createElement(Be,{value:"demography"},"demography"),i.a.createElement(Be,{value:"domain"},"domain"),i.a.createElement(Be,{value:"subdomain"},"subdomain"),i.a.createElement(Be,{value:"user_variant"},"user_variant"))),i.a.createElement(ee.a.Item,{label:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0448\u0430\u0433\u0438",style:{paddingRight:12,width:"40%",display:"inline-block"},name:"next_steps"},i.a.createElement(ne.a,{mode:"tags",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0433\u0438"},i.a.createElement(Be,{value:"step.title"},"\u0428\u0430\u0433")))),i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",style:{paddingRight:12,width:"40%",display:"inline-block"},name:"title"},i.a.createElement(ae.a.TextArea,null)),i.a.createElement(ee.a.Item,{label:"\u0422\u0435\u043a\u0441\u0442",style:{paddingRight:12,width:"60%",display:"inline-block"},name:"body"},i.a.createElement(ae.a.TextArea,null)))),i.a.createElement(ee.a.Item,{style:{marginBottom:8,paddingTop:8,paddingBottom:8,textAlign:"center"},className:"StepElement"},i.a.createElement("h4",null,"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"primary",style:{float:"right"}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))},qe=a(392),ze=a(75),Pe=a(68),Fe=a(420),Le=a(156),Ne=ne.a.Option,Ke=function e(t){if(Pe(t)){if(0===t.length)return;return t.map((function(t){return e(t)}))}if(ze(t)){var a=qe(Fe(t,(function(t){return e(t)})));if(0===Object.keys(a).length)return;return a}return t},Me=Object(W.a)((function(){var e=Object(u.i)().title,t=Object(r.useState)(Y.steps.find((function(t){return t.title===e}))||{body:{}}),a=Object(y.a)(t,2),n=a[0],l=a[1],c=Object(u.g)(),o=Object(r.useState)(!1),s=Object(y.a)(o,2),m=s[0],h=s[1],g=(Object(r.useRef)(),Object(r.useState)("")),E=Object(y.a)(g,2),v=E[0],k=E[1];Object(r.useEffect)((function(){Y.steps.length||Y.getDraft().then((function(){var t=Y.steps.find((function(t){return t.title===e}));t||c.replace("/error"),l(t)}))}),[]);var x=Y.steps.map((function(e){return e.title})),O=Y.results.map((function(e){return e.title}));if(!n.title)return i.a.createElement(Ve,null);var w=function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!1),e.next=4,Y.setStep(n.title,Le.parse(v));case 4:b.a.success({message:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.a.error({message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement(ee.a,{layout:"vertical",onFinish:function(e){e.placeholders&&(e.placeholders=e.placeholders.map((function(e){return e.items&&(e.items=e.items.filter((function(e){return!!e})).map((function(e){return e.raw_text&&(e.value.data=void 0),e}))),e}))),console.log(Object(A.a)({},n.body,{},Ke(e)));var t=Ke(Object(A.a)({},n.body,{},e));k(Le.stringify(t)),h(!0)},initialValues:Object(A.a)({},n.body,{placeholders:void 0})},i.a.createElement(ee.a.Item,null,i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement("h2",null,"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")),i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u0422\u0438\u043f",name:"type",style:{paddingRight:12,width:"20%",display:"inline-block"}},i.a.createElement(ne.a,null,i.a.createElement(Ne,{value:"general"},"general"),i.a.createElement(Ne,{value:"info"},"info"),i.a.createElement(Ne,{value:"items"},"items"),i.a.createElement(Ne,{value:"domainSelection"},"domainSelection"),i.a.createElement(Ne,{value:"result"},"result"))),i.a.createElement(ee.a.Item,{label:"\u0422\u0435\u0433\u0438",style:{paddingRight:12,width:"40%",display:"inline-block"},name:"stats"},i.a.createElement(ne.a,{mode:"tags",style:{width:"100%"},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u0433\u0438"},i.a.createElement(Ne,{value:"demography"},"demography"),i.a.createElement(Ne,{value:"domain"},"domain"),i.a.createElement(Ne,{value:"subdomain"},"subdomain"),i.a.createElement(Ne,{value:"user_variant"},"user_variant"))),i.a.createElement(ee.a.Item,{label:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0448\u0430\u0433\u0438",style:{paddingRight:12,width:"40%",display:"inline-block"},name:"next_steps"},i.a.createElement(ne.a,{mode:"tags",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0430\u0433\u0438"},Y.steps.map((function(e){return i.a.createElement(Ne,{key:"option-".concat(e.title),value:e.title},e.title)}))))),i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",style:{paddingRight:12,width:"40%",display:"inline-block"},name:"title"},i.a.createElement(ae.a.TextArea,null)),i.a.createElement(ee.a.Item,{label:"\u0422\u0435\u043a\u0441\u0442",style:{paddingRight:12,width:"60%",display:"inline-block",visibility:"info"===n.body.type?"hidden":"visible"},hidden:"info"===n.body.type,name:"body"},i.a.createElement(ae.a.TextArea,null)))),i.a.createElement(Ce,{defaultValue:n.body.placeholders,results:O,steps:x,hidden:"info"===n.body.type||"result"===n.body.type}),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"primary",htmlType:"submit",style:{float:"right"}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),i.a.createElement(ee.a.Item,{name:["next_button"],hidden:!0},i.a.createElement(ae.a,null))),i.a.createElement(G.a,{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439",visible:m,onOk:w,okText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onCancel:h.bind(null,!1),width:"50%"},i.a.createElement(ae.a.TextArea,{value:v,onChange:function(e){return k(e.target.value)},autoSize:{maxRows:15}})))})),Ye=a(451),He=a(452),Ze=a(453),Ue=function(e){var t=e.data,a=e.index,n=e.remove,l=e.move,c=e.booksCount,o=Object(r.useState)(!1),s=Object(y.a)(o,2),u=s[0],m=s[1];return i.a.createElement(ee.a.Item,{className:"StepElement"},i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",isListField:!0,name:[a,"name"],rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438"}],style:{display:"inline-block",width:"calc(40% - 4px)",paddingRight:12}},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{style:{paddingRight:12,float:"right"},label:"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b"},i.a.createElement(f.a,{icon:i.a.createElement(Ye.a,null),onClick:function(){return l(t.name,t.name-1)},style:{display:"inline-block",marginRight:12},disabled:0===t.name}),i.a.createElement(f.a,{icon:i.a.createElement(He.a,null),onClick:function(){return l(t.name,t.name+1)},style:{display:"inline-block",marginRight:12},disabled:t.name===c-1}),i.a.createElement(f.a,{icon:u?i.a.createElement(ke.a,null):i.a.createElement(xe.a,null),onClick:m.bind(null,(function(e){return!e})),style:{display:"inline-block",marginRight:12,width:140}},u?"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"),i.a.createElement(f.a,{danger:!0,onClick:n,style:{display:"inline-block"}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"))),i.a.createElement(ee.a.Item,{hidden:u},i.a.createElement(_e,{label:"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",hidable:!1},i.a.createElement(ee.a.Item,{label:"\u0410\u0432\u0442\u043e\u0440",isListField:!0,name:[a,"author"],rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430 \u043a\u043d\u0438\u0433\u0438"}],style:{display:"inline-block",width:"calc(50% - 6px)",paddingRight:12}},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u0416\u0430\u043d\u0440",isListField:!0,name:[a,"description"],rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0436\u0430\u043d\u0440 \u043a\u043d\u0438\u0433\u0438"}],style:{display:"inline-block",width:"calc(50% - 6px)"}},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",isListField:!0,name:[a,"img_url"],rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443 \u043a\u043d\u0438\u0433\u0438"}],style:{display:"inline-block",width:"calc(38% - 6px)",paddingRight:12}},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u043d\u0438\u0433\u0443",isListField:!0,name:[a,"store_url"],style:{display:"inline-block",width:"calc(38% - 6px)",paddingRight:12},initialValue:""},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442\u043d\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435",isListField:!0,rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u043d\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438"}],name:[a,"age_limit"],style:{display:"inline-block",width:"24%"}},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{isListField:!0,name:[a,"eval"],initialValue:5,hidden:!0},i.a.createElement(ve.a,null))),i.a.createElement(_e,{label:"\u0426\u0438\u0442\u0430\u0442\u044b"},i.a.createElement(ee.a.List,{isListField:!0,name:[a,"quotes"]},(function(e,t){var a=t.add,n=t.remove;return i.a.createElement(i.a.Fragment,null,e.map((function(t,a){return i.a.createElement(ee.a.Item,{required:!1,key:t.key},i.a.createElement(ee.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0438\u0442\u0430\u0442\u0443 \u0438\u0437 \u043a\u043d\u0438\u0433\u0438"}],noStyle:!0}),i.a.createElement(ae.a.TextArea,{autoSize:!0,placeholder:"\u0426\u0438\u0442\u0430\u0442\u0430",style:{width:"60%"}})),e.length>1?i.a.createElement(Ze.a,{className:"dynamic-delete-button",onClick:function(){return n(t.name)},style:{marginLeft:8}}):null)})),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"dashed",onClick:function(){return a()},style:{width:"60%"},icon:i.a.createElement(ie.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0446\u0438\u0442\u0430\u0442\u0443")))}))),i.a.createElement(_e,{label:"\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438"},i.a.createElement(ee.a.List,{isListField:!0,name:[a,"annotations"]},(function(e,t){var a=t.add,n=t.remove;return i.a.createElement(i.a.Fragment,null,e.map((function(t,a){return i.a.createElement(ee.a.Item,{required:!1,key:t.key},i.a.createElement(ee.a.Item,Object.assign({},t,{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044e  \u043a \u043a\u043d\u0438\u0433\u0435"}],noStyle:!0}),i.a.createElement(ae.a.TextArea,{autoSize:!0,placeholder:"\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f",style:{width:"60%"}})),e.length>1?i.a.createElement(Ze.a,{className:"dynamic-delete-button",onClick:function(){return n(t.name)},style:{marginLeft:8}}):null)})),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"dashed",onClick:function(){return a()},style:{width:"60%"},icon:i.a.createElement(ie.a,null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044e")))})))))},Xe=(ne.a.Option,function(){return i.a.createElement(De.a,null,i.a.createElement(ee.a,{layout:"vertical"},i.a.createElement(ee.a.Item,null,i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement("h2",null,"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")),i.a.createElement(ee.a.Item,{style:{paddingRight:12,width:"60%",display:"inline-block"}},i.a.createElement(ee.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"header",rules:[{required:!0,message:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}]},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",rules:[{required:!0,message:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}]},i.a.createElement(ae.a.TextArea,{autoSize:!0})))),i.a.createElement(ee.a.List,{name:["books"]},(function(e,t){var a=t.add,n=t.remove;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block"}},i.a.createElement("h2",null,"\u041a\u043d\u0438\u0433\u0438")),i.a.createElement(ee.a.Item,{style:{paddingRight:12,float:"right"}},i.a.createElement(f.a,{type:"primary",icon:i.a.createElement(ie.a,null),onClick:a},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"))),e.length?e.map((function(e){return i.a.createElement(Ue,{index:e.name,data:e,remove:n.bind(null,e.name)})})):i.a.createElement(ee.a.Item,{style:{marginBottom:8,paddingTop:8,paddingBottom:8,textAlign:"center"},className:"StepElement"},i.a.createElement("h4",null,"\u041a\u043d\u0438\u0433\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")))})),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"primary",htmlType:"submit",style:{float:"right"}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}),Je=a(156),We=Object(W.a)((function(){var e=Object(u.i)().title,t=Object(r.useState)(Y.results.find((function(t){return t.title===e}))||{body:{}}),a=Object(y.a)(t,2),n=a[0],l=a[1],c=Object(u.g)(),o=Object(r.useState)(!1),s=Object(y.a)(o,2),m=s[0],h=s[1],g=Object(r.useState)(""),E=Object(y.a)(g,2),v=E[0],k=E[1];Object(r.useEffect)((function(){console.log(e),Y.results.length||Y.getDraft().then((function(){var t=Y.results.find((function(t){return t.title===e}));t||c.replace("/error"),l(t)}))}),[]);var x=function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!1),e.next=4,Y.setResult(n.title,Je.parse(v));case 4:b.a.success({message:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.a.error({message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return n.title?i.a.createElement("div",null,i.a.createElement(ee.a,{layout:"vertical",onFinish:function(e){console.log(e),k(Je.stringify(e)),h(!0),console.log(e)},initialValues:n.body},i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement("h2",null,"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")),i.a.createElement(ee.a.Item,{style:{paddingRight:12,width:"60%",display:"inline-block"}},i.a.createElement(ee.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"header",rules:[{required:!0,message:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}]},i.a.createElement(ae.a,null)),i.a.createElement(ee.a.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",rules:[{required:!0,message:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}]},i.a.createElement(ae.a.TextArea,{autoSize:!0}))),i.a.createElement(ee.a.List,{name:["books"]},(function(e,t){var a=t.add,n=t.remove,l=t.move;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ee.a.Item,{style:{marginBottom:0}},i.a.createElement(ee.a.Item,{style:{paddingRight:12,display:"inline-block"}},i.a.createElement("h2",null,"\u041a\u043d\u0438\u0433\u0438")),i.a.createElement(ee.a.Item,{style:{paddingRight:12,float:"right"}},i.a.createElement(f.a,{type:"primary",icon:i.a.createElement(ie.a,null),onClick:function(e){return a({quotes:[""],annotations:[""]})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"))),e.length?e.map((function(t){return i.a.createElement(Ue,{index:t.name,data:t,remove:n.bind(null,t.name),move:l,booksCount:e.length})})):i.a.createElement(ee.a.Item,{style:{marginBottom:8,paddingTop:8,paddingBottom:8,textAlign:"center"},className:"StepElement"},i.a.createElement("h4",null,"\u041a\u043d\u0438\u0433\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")))})),i.a.createElement(ee.a.Item,null,i.a.createElement(f.a,{type:"primary",htmlType:"submit",style:{float:"right"}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))),i.a.createElement(G.a,{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439",visible:m,onOk:x,okText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onCancel:h.bind(null,!1),width:"50%"},i.a.createElement(ae.a.TextArea,{value:v,onChange:function(e){return k(e.target.value)},autoSize:{maxRows:15}}))):i.a.createElement(Xe,null)})),Ge=a(435),Qe=function(){var e=Object(u.g)();return i.a.createElement(Ge.a,{status:"404",title:"404",subTitle:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043d\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044f \u043d\u0430\u0439\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0441\u0443\u0440\u0441 :(",extra:i.a.createElement(f.a,{type:"primary",onClick:function(){return e.replace("/steps/")}},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")})};var $e=Object(W.a)((function(){return i.a.createElement(s.a,{basename:"/admin/v2"},i.a.createElement(u.b,{path:"/",exact:!0},i.a.createElement(u.a,{to:"/login"})),i.a.createElement(u.b,{path:"/login",exact:!0},K.loggedIn?i.a.createElement(u.a,{to:"/steps"}):i.a.createElement(fe,null)),i.a.createElement(u.d,null,i.a.createElement(u.b,{path:["/steps","/results","/statistic","/error"]},K.loggedIn?i.a.createElement(J,null,i.a.createElement(u.d,null,i.a.createElement(u.b,{path:"/steps",exact:!0},i.a.createElement(ue,null)),i.a.createElement(u.b,{path:"/steps/:title",exact:!0},i.a.createElement(Me,null)),i.a.createElement(u.b,{path:"/results",exact:!0},i.a.createElement(de,null)),i.a.createElement(u.b,{path:"/results/:title",exact:!0},i.a.createElement(We,null)),i.a.createElement(u.b,{path:"/statistic"},i.a.createElement(be,null)),i.a.createElement(u.b,{path:"/error"},i.a.createElement(Qe,null)))):i.a.createElement(u.a,{to:"/login"}))))}));o.a.render(i.a.createElement($e,null),document.getElementById("root"))}},[[241,1,2]]]);
//# sourceMappingURL=main.aac801b5.chunk.js.map